env:
  global:
    # Repo token to send coverage report to coveralls
    # secure: "Bwd0xjT6ttdSLhtteVQaCTk3pUFw7dJDZ4ei7+XaV/yeKxen9SDjfz/vq7yZqyyEAugTg1HrTJix1aOoBCNBWaIjYF69k53Tdh5Hu2Juny4B6+YE26m7/yGZ7FOd7+966NN2y3IKLLDFQL4qSe0edFE8cUf9TbgZ1GbgchKRpUQvBX3lVyeH9u6QPyE96hSi2xOCfAdadkFWiaHUTSLTH7bz3zvCWs1VjXyEyejePc7LiHr3MROXxoiUTdoTI0GcSFQVfPrGCUI1L+a9niUPQprqe26cLYAVXdgWQNCczA4ibvQOqaGkhYJp+f+0rr4gGuc5aViOEnAU7nrjVQYSxp92lPPqzn4aNQ6Sm5x7GVlfQlcz2Mgld0mFOj/saM7OyxnK9EWAUmIY1f44I/7oi9OSN4UzPcsFYETi4Cq5c4i9Rhu71W9xwNzC7Ec7IfAT4cCt5Q7srJKpJHKwhqODfjSLWc2oFVlkkfuuZ9mtPKIiWrdbHjIRXEQfVAfIdAQQyY8MNKsP0XNz/S0eyAoqffQbdSUbWm+H+pwwCjz4apHbgACwYBrNNJLP+tvszbcpHpYs5PrBslnRmn9FrkZmxEDaeSnCGuzxIDDoeq6VmKBV7OrixY/QK4olazzV3eVqjkslQQm/xmw7fjCk5LJs8009g3Lv20aFsawwgazg5jk="
    # trigger_token to trigger a build on dockerhub
    secure: "Ckz0erJux6gLnkS6/iWgZVBdplsjTTwNaLNLL7zGSMk4FOvuKiXIa5dss87j4MLp1ZHV39X3UZ6f1XTcmnS+sAj6tMj2grb8J6C7Cu5mNGAlI48arqhpk5+YFSoOR7/zGU+cVR19b4LF5T4kHwe+QFpLKwrNza1f3QtvA5RGSFU0bILHnZdnSBRM7H7GgV36HxJ0jooGAVlnd5IPiMFYIKezuJlHhbCTnsoXwNwGIXqi5An/fbs6BSpWwqunJe6oEqvhjYtR9YL8jb8szd8t/XlJhWa2Ma6V+wOvKknEOVpS0hA19nPJnfru2CRt8eCYYMFQVPQKz8mY0dLMQUd/RoLBn8gwrJOSPeB4u/G2F+pqFtG6U20tzaFfR2XCxCJ0cJZSRyjHS6mswwMjr0Z2yVBWYbVwesfQj/UTT97rAUb0REgmnQI1vim/q6lHQvahpeGGHFE8te6uzuDJnGsvh8TqF1asLCIDpJ6ffD5EdF1YDCdQQeogyDpL4q/hmQi4va0dYNqCX5LyZaDsNxKldNU9emzL8t23H/OCo/gvFdK5pWv7o+ykQ+9lVOat5mJV9Go+q5AqTZ8PptM1d3oU0BfJBPb6ZcjBLL2UQB3mSfoFgpPKtOsgolGKFQe64vIEW4BPNefhiYWqR3ld8NJU5Wv0EgM42E4ba/4d563C6QQ="

branches:
  only:
    - master

language: node_js
node_js:
  - '4'

sudo: required
services:
  - docker

install:
  - npm install
  - npm run build

script:
  - npm run lint
  - npm test
  - npm run coveralls
  - npm run check-coverage
  - npm run test-dist

after_script:
  - curl -XPOST https://registry.hub.docker.com/u/albanm/flux-templating/trigger/"$trigger_token"/
